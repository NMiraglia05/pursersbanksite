<!DOCTYPE html>
<html>
<head>
    <title>Place Order</title>
    <style>
        .category-box {
            border: 1px solid #333;
            padding: 10px;
            margin: 10px;
        }
        .qty-select {
            display: none;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <h1>Place Your Order</h1>
    <form method="POST">
        {% for cat, items in categories.items() %}
            <div class="category-box">
                <h2>{{ cat|capitalize }}</h2>
                {% for item in items %}
                    <label>
                        <input type="checkbox" class="item-checkbox" data-target="qty-{{ item.name }}">
                        {{ item.name }} ({{ item.points }} pts)
                    </label>
                    <select name="qty-{{ item.name }}" id="qty-{{ item.name }}" class="qty-select">
                        {% for i in range(1, 11) %}
                            <option value="{{ i }}">{{ i }}</option>
                        {% endfor %}
                    </select>
                    <br>
                {% endfor %}
            </div>
        {% endfor %}
        <button type="submit">Submit Order</button>
    </form>

    <script>
        document.querySelectorAll('.item-checkbox').forEach(cb => {
            cb.addEventListener('change', function() {
                const targetId = this.getAttribute('data-target');
                const dropdown = document.getElementById(targetId);
                if(this.checked) {
                    dropdown.style.display = 'inline';
                    dropdown.value = 1;
                } else {
                    dropdown.style.display = 'none';
                    dropdown.value = 0;
                }
            });
        });
    </script>
</body>
</html>
